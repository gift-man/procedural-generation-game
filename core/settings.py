"""–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏–≥—Ä—ã —Å –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ–º"""
import pygame

# –ê–î–ê–ü–¢–ò–í–ù–´–ï –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —ç–∫—Ä–∞–Ω–∞
# –£–í–ï–õ–ò–ß–ò–í–ê–ï–ú —Ä–∞–∑–º–µ—Ä –¥–ª—è 3 –æ—Å—Ç—Ä–æ–≤–æ–≤
DEFAULT_WIDTH = 1600  # –ë—ã–ª–æ 1200
DEFAULT_HEIGHT = 900  # –ë—ã–ª–æ 800
CELL_SIZE = 22        # –ù–µ–º–Ω–æ–≥–æ –º–µ–Ω—å—à–µ –¥–ª—è –±–æ–ª—å—à–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–ª–µ—Ç–æ–∫


# –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–µ–∞–ª—å–Ω–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –º–æ–Ω–∏—Ç–æ—Ä–∞
pygame.init()
desktop_sizes = pygame.display.get_desktop_sizes()
if desktop_sizes:
    DESKTOP_WIDTH, DESKTOP_HEIGHT = desktop_sizes[0]
    print(f"üñ•Ô∏è –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –º–æ–Ω–∏—Ç–æ—Ä–∞: {DESKTOP_WIDTH}x{DESKTOP_HEIGHT}")
    
    # –ê–¥–∞–ø—Ç–∏—Ä—É–µ–º —Ä–∞–∑–º–µ—Ä –æ–∫–Ω–∞ –∫ –º–æ–Ω–∏—Ç–æ—Ä—É (80% –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ —ç–∫—Ä–∞–Ω–∞)
    SCREEN_WIDTH = min(DEFAULT_WIDTH, int(DESKTOP_WIDTH * 0.8))
    SCREEN_HEIGHT = min(DEFAULT_HEIGHT, int(DESKTOP_HEIGHT * 0.8))
    
    # –î–ª—è –±–æ–ª—å—à–∏—Ö –º–æ–Ω–∏—Ç–æ—Ä–æ–≤ —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º –æ–∫–Ω–æ
    if DESKTOP_WIDTH >= 1920:
        SCREEN_WIDTH = min(1600, int(DESKTOP_WIDTH * 0.75))
    if DESKTOP_HEIGHT >= 1080:
        SCREEN_HEIGHT = min(1000, int(DESKTOP_HEIGHT * 0.75))
else:
    SCREEN_WIDTH = DEFAULT_WIDTH
    SCREEN_HEIGHT = DEFAULT_HEIGHT

# –í—ã—á–∏—Å–ª—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–µ—Ç–æ–∫
COLS = SCREEN_WIDTH // CELL_SIZE
ROWS = SCREEN_HEIGHT // CELL_SIZE

print(f"üìä –ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –æ–∫–Ω–æ: {SCREEN_WIDTH}x{SCREEN_HEIGHT}")
print(f"üìè –ö–ª–µ—Ç–æ–∫: {COLS}x{ROWS}")

# –î–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º
WIDTH = SCREEN_WIDTH
HEIGHT = SCREEN_HEIGHT

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–≤–∏–Ω—Ü–∏–π
MIN_PROVINCE_SIZE = 4
MAX_PROVINCE_SIZE = 8

# –°–º–µ—â–µ–Ω–∏–µ –æ—Å—Ç—Ä–æ–≤–∞
ISLAND_OFFSET_X = 4
ISLAND_OFFSET_Y = 2

# –ú–∞—Ç—Ä–∏—Ü–∞ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –æ—Å—Ç—Ä–æ–≤–∞ (—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è)
ISLAND_MATRIX = [
    [0,1,0,0,0,0,0,0,0],
    [0,1,1,1,0,1,1,0,0],
    [1,1,1,1,1,1,1,0,0],
    [0,1,1,1,1,1,1,0,0],
    [0,1,1,1,1,1,1,1,0],
    [0,0,1,1,1,1,1,1,0],
    [0,0,1,1,1,1,1,1,0],
    [0,0,1,1,1,1,1,1,1],
    [0,1,1,1,1,1,1,1,1],
    [0,1,1,1,1,1,1,0,0],
    [0,1,1,1,1,1,1,0,0],
    [1,1,1,1,1,1,1,0,0],
    [1,1,1,1,1,1,1,1,0],
    [0,1,1,1,1,1,1,1,0],
    [0,0,0,0,1,1,1,0,0]
]

# FPS
FPS = 60

# === –ù–ê–°–¢–†–û–ô–ö–ò UI ===

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –∫–∞—Ä—Ç—ã
MAP_OFFSET_X = 100
MAP_OFFSET_Y = 100

# –¶–≤–µ—Ç–∞ –±–∞–∑–æ–≤–æ–π –∫–∞—Ä—Ç—ã
BACKGROUND_COLOR = (200, 230, 255)   # –°–≤–µ—Ç–ª–æ-–≥–æ–ª—É–±–æ–π —Ñ–æ–Ω
WATER_COLOR = (173, 216, 230)        # –°–≤–µ—Ç–ª–æ-–≥–æ–ª—É–±–æ–µ –º–æ—Ä–µ  
LAND_COLOR = (144, 238, 144)         # –°–≤–µ—Ç–ª–æ-–∑–µ–ª–µ–Ω–∞—è —Å—É—à–∞

# –¶–≤–µ—Ç–∞ –ø—Ä–æ–≤–∏–Ω—Ü–∏–π –¥–ª—è –∏–≥—Ä–æ–∫–æ–≤
PROVINCE_COLORS = [
    (255, 100, 100), (100, 255, 100), (100, 100, 255),
    (255, 255, 100), (255, 100, 255), (100, 255, 255),
    (255, 200, 100), (200, 255, 100), (200, 100, 255),
    (255, 150, 150), (150, 255, 150), (150, 150, 255),
    (200, 200, 100), (200, 100, 200), (100, 200, 200),
    (180, 180, 180), (120, 120, 120), (80, 80, 80),
    (160, 100, 200), (100, 200, 160), (200, 160, 100)
]

# UI —Ü–≤–µ—Ç–∞ –∫–Ω–æ–ø–æ–∫
BUTTON_COLOR = (70, 130, 180)
BUTTON_HOVER_COLOR = (100, 160, 210)
BUTTON_DANGER_COLOR = (180, 70, 70)
BUTTON_DANGER_HOVER_COLOR = (210, 100, 100)

# –†–∞–∑–º–µ—Ä—ã —à—Ä–∏—Ñ—Ç–æ–≤
FONT_SIZE_TITLE = 72
FONT_SIZE_BUTTON = 48
FONT_SIZE_TEXT = 32
FONT_SIZE_SMALL = 24

# === –ù–ê–°–¢–†–û–ô–ö–ò –ü–†–û–¶–ï–î–£–†–ù–û–ô –ì–ï–ù–ï–†–ê–¶–ò–ò ===
ENABLE_PROCEDURAL_ISLANDS = True
MAX_ADDITIONAL_ISLANDS = 2
PROCEDURAL_ISLAND_MIN_SIZE = 12
PROCEDURAL_ISLAND_MAX_SIZE = 50

# === –û–¢–õ–ê–î–û–ß–ù–´–ï –ù–ê–°–¢–†–û–ô–ö–ò ===
DEBUG_ISLAND_POSITIONING = True   # –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –æ—Ç–ª–∞–¥–∫—É –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
ENABLE_SECOND_ISLAND = True       # –í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –≤—Ç–æ—Ä–æ–π –æ—Å—Ç—Ä–æ–≤

# === –ù–ê–°–¢–†–û–ô–ö–ò –ì–ï–ù–ï–†–ê–¶–ò–ò (–¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏) ===
ISLAND_WIDTH = 15
ISLAND_HEIGHT = 12
ISLAND_DENSITY = 0.75  # –ü–ª–æ—Ç–Ω–æ—Å—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –æ—Å—Ç—Ä–æ–≤–∞

# === –ü–†–û–í–ï–†–û–ß–ù–´–ï –í–´–ß–ò–°–õ–ï–ù–ò–Ø ===
print(f"üìä –ü–†–û–í–ï–†–ö–ê –ù–ê–°–¢–†–û–ï–ö –≠–ö–†–ê–ù–ê:")
print(f"   –†–∞–∑–º–µ—Ä —ç–∫—Ä–∞–Ω–∞: {SCREEN_WIDTH}x{SCREEN_HEIGHT}")
print(f"   –†–∞–∑–º–µ—Ä –∫–ª–µ—Ç–∫–∏: {CELL_SIZE}")
print(f"   –ö–ª–µ—Ç–æ–∫ –ø–æ–º–µ—â–∞–µ—Ç—Å—è: {SCREEN_WIDTH // CELL_SIZE}x{SCREEN_HEIGHT // CELL_SIZE}")
print(f"   –û—Å–Ω–æ–≤–Ω–æ–π –æ—Å—Ç—Ä–æ–≤: —à–∏—Ä–∏–Ω–∞ {len(ISLAND_MATRIX[0])}, –≤—ã—Å–æ—Ç–∞ {len(ISLAND_MATRIX)}")
print(f"   –û—Å–Ω–æ–≤–Ω–æ–π –æ—Å—Ç—Ä–æ–≤ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏–º–µ—Ä–Ω–æ –Ω–∞ X = {ISLAND_OFFSET_X + len(ISLAND_MATRIX[0])}")

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Å—Ç–∞ –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –æ—Å—Ç—Ä–æ–≤–æ–≤
available_width = (SCREEN_WIDTH // CELL_SIZE) - (ISLAND_OFFSET_X + len(ISLAND_MATRIX[0]) + 2)
print(f"   –ú–µ—Å—Ç–æ –¥–ª—è –≤—Ç–æ—Ä–æ–≥–æ –æ—Å—Ç—Ä–æ–≤–∞: X = {available_width}")

if available_width < 10:
    print(f"   ‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï: –ú–∞–ª–æ –º–µ—Å—Ç–∞ –¥–ª—è –≤—Ç–æ—Ä–æ–≥–æ –æ—Å—Ç—Ä–æ–≤–∞ ({available_width} –∫–ª–µ—Ç–æ–∫)")
    print(f"   üí° –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —É–≤–µ–ª–∏—á–∏—Ç—å SCREEN_WIDTH –∏–ª–∏ —É–º–µ–Ω—å—à–∏—Ç—å CELL_SIZE")
else:
    print(f"   ‚úÖ –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–µ—Å—Ç–∞ –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –æ—Å—Ç—Ä–æ–≤–æ–≤")

print(f"üèùÔ∏è –ü—Ä–æ—Ü–µ–¥—É—Ä–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Å—Ç—Ä–æ–≤–æ–≤: {'–≤–∫–ª—é—á–µ–Ω–∞' if ENABLE_PROCEDURAL_ISLANDS else '–æ—Ç–∫–ª—é—á–µ–Ω–∞'}")

# === –ê–î–ê–ü–¢–ò–í–ù–´–ï –ù–ê–°–¢–†–û–ô–ö–ò –ü–û –†–ê–ó–ú–ï–†–£ –≠–ö–†–ê–ù–ê ===

# –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ —ç–∫—Ä–∞–Ω–∞
if SCREEN_WIDTH >= 1600:
    # –î–ª—è –±–æ–ª—å—à–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ - –±–æ–ª—å—à–µ –∫–ª–µ—Ç–∫–∏
    CELL_SIZE = 30
    print(f"üìè –ë–æ–ª—å—à–æ–π —ç–∫—Ä–∞–Ω - —É–≤–µ–ª–∏—á–µ–Ω —Ä–∞–∑–º–µ—Ä –∫–ª–µ—Ç–∫–∏ –¥–æ {CELL_SIZE}")
elif SCREEN_WIDTH <= 1000:
    # –î–ª—è –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ - –º–µ–Ω—å—à–µ –∫–ª–µ—Ç–∫–∏  
    CELL_SIZE = 20
    print(f"üìè –ú–∞–ª–µ–Ω—å–∫–∏–π —ç–∫—Ä–∞–Ω - —É–º–µ–Ω—å—à–µ–Ω —Ä–∞–∑–º–µ—Ä –∫–ª–µ—Ç–∫–∏ –¥–æ {CELL_SIZE}")

# –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–µ—Ç–æ–∫ –ø–æ—Å–ª–µ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏
COLS = SCREEN_WIDTH // CELL_SIZE
ROWS = SCREEN_HEIGHT // CELL_SIZE

print(f"üìê –§–∏–Ω–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã: {SCREEN_WIDTH}x{SCREEN_HEIGHT}, –∫–ª–µ—Ç–∫–∞ {CELL_SIZE}px, —Å–µ—Ç–∫–∞ {COLS}x{ROWS}")
